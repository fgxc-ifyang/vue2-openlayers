<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ChengYu-cloud部署 | ChengYu-cloud中文文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="极简、高效、配置简单">
    
    <link rel="preload" href="/assets/css/0.styles.7cfabf05.css" as="style"><link rel="preload" href="/assets/js/app.0be82e56.js" as="script"><link rel="preload" href="/assets/js/2.2668fa1b.js" as="script"><link rel="preload" href="/assets/js/3.fd22fded.js" as="script"><link rel="prefetch" href="/assets/js/10.285f55d1.js"><link rel="prefetch" href="/assets/js/11.decff412.js"><link rel="prefetch" href="/assets/js/12.b9ed6e21.js"><link rel="prefetch" href="/assets/js/13.d9c8c7a9.js"><link rel="prefetch" href="/assets/js/14.6495a0e6.js"><link rel="prefetch" href="/assets/js/15.70d64d1a.js"><link rel="prefetch" href="/assets/js/16.a93c018c.js"><link rel="prefetch" href="/assets/js/17.ed91eb16.js"><link rel="prefetch" href="/assets/js/18.d07cd593.js"><link rel="prefetch" href="/assets/js/19.4b8a0f22.js"><link rel="prefetch" href="/assets/js/20.52de9326.js"><link rel="prefetch" href="/assets/js/21.2293a5ca.js"><link rel="prefetch" href="/assets/js/4.ad26b2fa.js"><link rel="prefetch" href="/assets/js/5.a1c97bcb.js"><link rel="prefetch" href="/assets/js/6.32f67120.js"><link rel="prefetch" href="/assets/js/7.99161716.js"><link rel="prefetch" href="/assets/js/8.a0d65864.js"><link rel="prefetch" href="/assets/js/9.2d06e692.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7cfabf05.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ChengYu-cloud中文文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>项目介绍</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/" aria-current="page" class="sidebar-link">ChengYu-cloud开发文档</a></li><li><a href="/guide/summary.html" class="sidebar-link">基础功能</a></li><li><a href="/guide/nacos.html" class="sidebar-link">Nacos 说明</a></li><li><a href="/guide/hystrix.html" class="sidebar-link">熔断降级限流 hystirx</a></li><li><a href="/guide/gateway.html" class="sidebar-link">gateway路由配置使用说明</a></li><li><a href="/guide/rabbitmq.html" class="sidebar-link">RabbitMq集成说明</a></li><li><a href="/guide/admin.html" class="sidebar-link">Spring Boot Admin服务监控</a></li><li><a href="/guide/skywarking.html" class="sidebar-link">链路跟踪 skywarking</a></li><li><a href="/guide/opsdev.html" class="sidebar-link">docker 说明</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>项目部署</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/deepchange.html" aria-current="page" class="active sidebar-link">ChengYu-cloud部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/deepchange.html#环境说明" class="sidebar-link">环境说明</a></li><li class="sidebar-sub-header"><a href="/guide/deepchange.html#archiva-maven" class="sidebar-link">Archiva Maven</a></li><li class="sidebar-sub-header"><a href="/guide/deepchange.html#docker" class="sidebar-link">docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/deepchange.html#docker安装" class="sidebar-link">docker安装</a></li><li class="sidebar-sub-header"><a href="/guide/deepchange.html#docker软件安装" class="sidebar-link">docker软件安装</a></li><li class="sidebar-sub-header"><a href="/guide/deepchange.html#dockerfile镜像制作" class="sidebar-link">Dockerfile镜像制作</a></li><li class="sidebar-sub-header"><a href="/guide/deepchange.html#docker-compose镜像制作" class="sidebar-link">docker-compose镜像制作</a></li><li class="sidebar-sub-header"><a href="/guide/deepchange.html#docker仓库搭建与使用" class="sidebar-link">docker仓库搭建与使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/deepchange.html#postgres搭建" class="sidebar-link">postgres搭建</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="chengyu-cloud部署"><a href="#chengyu-cloud部署" class="header-anchor">#</a> ChengYu-cloud部署</h1> <h2 id="环境说明"><a href="#环境说明" class="header-anchor">#</a> 环境说明</h2> <p>JDK: 1.8</p> <p>Maven:</p> <p>MySql:</p> <p>Redis:</p> <p>PostgreSQL:</p> <h2 id="archiva-maven"><a href="#archiva-maven" class="header-anchor">#</a> Archiva Maven</h2> <p>后台管理地址：http://192.144.227.154:8989</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>账号：admin
密码：admin20200202
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>本地maven配置  添加maven仓库连接地址和账号</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;servers&gt;
  &lt;server&gt;
    &lt;id&gt;archiva-releases&lt;/id&gt;
    &lt;username&gt;admin&lt;/username&gt;
    &lt;password&gt;admin20200202&lt;/password&gt;
  &lt;/server&gt;
  &lt;server&gt;
    &lt;id&gt;archiva-snapshots&lt;/id&gt;
    &lt;username&gt;admin&lt;/username&gt;
    &lt;password&gt;admin20200202&lt;/password&gt;
  &lt;/server&gt;
&lt;/servers&gt;

&lt;mirrors&gt;
  &lt;mirror&gt; 
    &lt;id&gt;archiva-releases&lt;/id&gt; 
    &lt;mirrorOf&gt;internal&lt;/mirrorOf&gt; 
    &lt;url&gt;http://192.144.227.154:8989/repository/internal/&lt;/url&gt; 
  &lt;/mirror&gt;
  &lt;mirror&gt; 
    &lt;id&gt;archiva-snapshots&lt;/id&gt;
    &lt;mirrorOf&gt;snapshots&lt;/mirrorOf&gt; 
    &lt;url&gt;http://192.144.227.154:8989/repository/snapshots/&lt;/url&gt; 
  &lt;/mirror&gt;
&lt;/mirrors&gt;
  
&lt;profiles&gt;
  &lt;profile&gt;
    &lt;activation&gt;
      &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
    &lt;/activation&gt;
    &lt;repositories&gt;
      &lt;repository&gt;
        &lt;id&gt;internal&lt;/id&gt;
        &lt;name&gt;Archiva Managed Internal Repository&lt;/name&gt;
        &lt;url&gt;http://192.144.227.154:8989/repository/internal/&lt;/url&gt;
        &lt;releases&gt;
          &lt;enabled&gt;true&lt;/enabled&gt;
        &lt;/releases&gt;
        &lt;snapshots&gt;
          &lt;enabled&gt;false&lt;/enabled&gt;
        &lt;/snapshots&gt;
      &lt;/repository&gt;
      &lt;repository&gt;
        &lt;id&gt;snapshots&lt;/id&gt;
        &lt;name&gt;Archiva Managed Snapshots Repository&lt;/name&gt;
        &lt;url&gt;http://192.144.227.154:8989/repository/snapshots/&lt;/url&gt;
        &lt;releases&gt;
          &lt;enabled&gt;false&lt;/enabled&gt;
        &lt;/releases&gt;
        &lt;snapshots&gt;
          &lt;enabled&gt;true&lt;/enabled&gt;
        &lt;/snapshots&gt;
      &lt;/repository&gt;
    &lt;/repositories&gt;
  &lt;/profile&gt;
&lt;/profiles&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><p>pom.xml配置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    &lt;distributionManagement&gt;
        &lt;repository&gt;
            &lt;id&gt;archiva-releases&lt;/id&gt;
            &lt;url&gt;http://192.144.227.154:8989/repository/internal/&lt;/url&gt;
        &lt;/repository&gt;
        &lt;snapshotRepository&gt;
            &lt;id&gt;archiva-snapshots&lt;/id&gt;
            &lt;url&gt;http://192.144.227.154:8989/repository/snapshots/&lt;/url&gt;
        &lt;/snapshotRepository&gt;
    &lt;/distributionManagement&gt;
    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="/assets/img/7F8296FF-4A75-4013-BBFC-D482BF5303FF.597ff8a1.png" alt="	"></p> <h2 id="docker"><a href="#docker" class="header-anchor">#</a> docker</h2> <h3 id="docker安装"><a href="#docker安装" class="header-anchor">#</a> docker安装</h3> <p>采用方式：升级系统为Windows 10 专业版</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1.更新Windows为最新版本
2.升级Windows为专业版
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>安装：安装<a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">docker官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>环境配置：控制面板\程序\程序和功能\启用或关闭Windows功能\勾选Hyper-V   重启生效</p> <h3 id="docker软件安装"><a href="#docker软件安装" class="header-anchor">#</a> docker软件安装</h3> <h4 id="_1-mysql安装"><a href="#_1-mysql安装" class="header-anchor">#</a> 1.mySQL安装</h4> <p>拉取官方的最新版本的镜像  <a href="https://hub.docker.com/_/mysql?tab=tags" target="_blank" rel="noopener noreferrer">MySQL 镜像库地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull mysql:latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_2-查看本地镜像"><a href="#_2-查看本地镜像" class="header-anchor">#</a> 2.查看本地镜像</h5> <p>查看是否已安装了 mysql：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker images
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/mysql_images.07b3a3e5.jpg" alt="	"></p> <h5 id="_3-运行容器"><a href="#_3-运行容器" class="header-anchor">#</a> 3.运行容器</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run -itd --name mysql-test -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 47.111.253.18:5000/mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><strong>-p 3306:3306</strong> ：映射容器服务的 3306 端口到宿主机的 3306 端口，外部主机可以直接通过 <strong>宿主机ip:3306</strong> 访问到 MySQL 的服务。</li> <li><strong>MYSQL_ROOT_PASSWORD=123456</strong>：设置 MySQL 服务 root 用户的密码</li></ul> <h5 id="_5-安装成功"><a href="#_5-安装成功" class="header-anchor">#</a> 5.安装成功</h5> <p>查看是否安装成功</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker ps
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2、nacos安装"><a href="#_2、nacos安装" class="header-anchor">#</a> 2、nacos安装</h4> <h5 id="_1-安装nacos"><a href="#_1-安装nacos" class="header-anchor">#</a> 1.安装nacos</h5> <p>nacos的环境搭建，参考<a href="https://nacos.io/zh-cn/docs/quick-start-docker.html" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull nacos/nacos-server
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_2-启动nacos"><a href="#_2-启动nacos" class="header-anchor">#</a> 2.启动nacos</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run --env MODE=standalone --name nacos -d -p 8848:8848 47.111.253.18:5000/nacos/nacos-server
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_3-查看nacos服务"><a href="#_3-查看nacos服务" class="header-anchor">#</a> 3.查看nacos服务</h5> <p>地址：http://localhost:8848/nacos
用户名密码：nacos/nacos
<img src="/assets/img/nacos.741b050d.jpg" alt="	"></p> <h5 id="_4-导入nacos数据库"><a href="#_4-导入nacos数据库" class="header-anchor">#</a> 4.导入nacos数据库</h5> <p>https://gitee.com/jeecg/jeecg-boot/blob/master/jeecg-boot/db/tables_nacos.sql</p> <h5 id="_5-nacos连接mysql"><a href="#_5-nacos连接mysql" class="header-anchor">#</a> 5.nacos连接mysql</h5> <p>查看docker中mySQL <strong>IPAddress</strong> 地址</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>docker inspect mysql容器ID
docker exec -it nacos容器ID bash
cd conf
vi application.properties
修改nacos连接mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_3-redis安装"><a href="#_3-redis安装" class="header-anchor">#</a> 3.redis安装</h4> <h5 id="_1-拉取-redis-镜像"><a href="#_1-拉取-redis-镜像" class="header-anchor">#</a> 1.拉取 redis 镜像</h5> <p>拉取官方的最新版本的镜像 <a href="https://redis.io/" target="_blank" rel="noopener noreferrer">redis官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull redis:latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="_2-查看本地镜像-2"><a href="#_2-查看本地镜像-2" class="header-anchor">#</a> 2.查看本地镜像</h5> <p>查看是否已安装了 redis：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker images
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="/assets/img/redis_images.f0979945.jpg" alt="	"></p> <h5 id="_3-运行容器-2"><a href="#_3-运行容器-2" class="header-anchor">#</a> 3.运行容器</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run -itd --name redis-test -p 6379:6379 redis
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><strong>-p 6379:6379</strong>：映射容器服务的 6379 端口到宿主机的 6379 端口。外部可以直接通过宿主机ip:6379 访问到 Redis 的服务。</li></ul> <h5 id="_5-安装成功-2"><a href="#_5-安装成功-2" class="header-anchor">#</a> 5.安装成功</h5> <p>查看是否安装成功</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker ps
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="dockerfile镜像制作"><a href="#dockerfile镜像制作" class="header-anchor">#</a> Dockerfile镜像制作</h3> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">FROM</span> anapsix/alpine-java:8_server-jre_unlimited</span>

<span class="token instruction"><span class="token keyword">MAINTAINER</span> ifyang@11.com</span>

<span class="token instruction"><span class="token keyword">RUN</span> ln -sf /usr/epqqmanage/deploy /etc/localtime</span>

<span class="token instruction"><span class="token keyword">RUN</span> mkdir -p /sys-gate</span>

<span class="token instruction"><span class="token keyword">WORKDIR</span> /sys-gate</span>

<span class="token instruction"><span class="token keyword">EXPOSE</span> 9002</span>

<span class="token instruction"><span class="token keyword">ADD</span> ./target/sys-gate.jar ./</span>

<span class="token instruction"><span class="token keyword">CMD</span> java -Djava.security.egd=file:/dev/./urandom -jar sys-gate.jar</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="docker-compose镜像制作"><a href="#docker-compose镜像制作" class="header-anchor">#</a> docker-compose镜像制作</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>version<span class="token operator">:</span> <span class="token char">'2'</span>
services<span class="token operator">:</span>
  sys<span class="token operator">-</span>center<span class="token operator">:</span>
    build<span class="token operator">:</span>
      context<span class="token operator">:</span> <span class="token punctuation">.</span>/sys<span class="token operator">-</span>center
    restart<span class="token operator">:</span> always
    ports<span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token number">8761</span><span class="token operator">:</span><span class="token number">8761</span>
    container_name<span class="token operator">:</span> sys<span class="token operator">-</span>center
    hostname<span class="token operator">:</span> sys<span class="token operator">-</span>center
    image<span class="token operator">:</span> sys<span class="token operator">-</span>center

  sys<span class="token operator">-</span>gate<span class="token operator">:</span>
    build<span class="token operator">:</span>
      context<span class="token operator">:</span> <span class="token punctuation">.</span>/sys<span class="token operator">-</span>gate
    restart<span class="token operator">:</span> always
    ports<span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token number">9002</span><span class="token operator">:</span><span class="token number">9002</span>
    container_name<span class="token operator">:</span> sys<span class="token operator">-</span>gate
    hostname<span class="token operator">:</span> sys<span class="token operator">-</span>gate
    image<span class="token operator">:</span> sys<span class="token operator">-</span>gate

  sysmanage<span class="token operator">:</span>
    build<span class="token operator">:</span>
      context<span class="token operator">:</span> <span class="token punctuation">.</span>/sysmanage
    restart<span class="token operator">:</span> always
    ports<span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token number">8012</span><span class="token operator">:</span><span class="token number">8012</span>
    container_name<span class="token operator">:</span> sysmanage
    hostname<span class="token operator">:</span> sysmanage
    image<span class="token operator">:</span> sysmanage

#  bz<span class="token operator">-</span>basedata<span class="token operator">:</span>
#    build<span class="token operator">:</span>
#      context<span class="token operator">:</span> <span class="token punctuation">.</span>/bz<span class="token operator">-</span>basedata
#    restart<span class="token operator">:</span> always
#    ports<span class="token operator">:</span>
#      <span class="token operator">-</span> <span class="token number">8945</span><span class="token operator">:</span><span class="token number">8945</span>
#    container_name<span class="token operator">:</span> bz<span class="token operator">-</span>basedata
#    hostname<span class="token operator">:</span> bz<span class="token operator">-</span>basedata
#    image<span class="token operator">:</span> bz<span class="token operator">-</span>basedata
#
#  bz<span class="token operator">-</span>device<span class="token operator">:</span>
#    build<span class="token operator">:</span>
#      context<span class="token operator">:</span> <span class="token punctuation">.</span>/bz<span class="token operator">-</span>device
#    restart<span class="token operator">:</span> always
#    ports<span class="token operator">:</span>
#      <span class="token operator">-</span> <span class="token number">8924</span><span class="token operator">:</span><span class="token number">8924</span>
#    container_name<span class="token operator">:</span> bz<span class="token operator">-</span>device
#    hostname<span class="token operator">:</span> bz<span class="token operator">-</span>device
#    image<span class="token operator">:</span> bz<span class="token operator">-</span>device
#
#  bz<span class="token operator">-</span>maintain<span class="token operator">:</span>
#    build<span class="token operator">:</span>
#      context<span class="token operator">:</span> <span class="token punctuation">.</span>/bz<span class="token operator">-</span>maintain
#    restart<span class="token operator">:</span> always
#    ports<span class="token operator">:</span>
#      <span class="token operator">-</span> <span class="token number">8765</span><span class="token operator">:</span><span class="token number">8765</span>
#    container_name<span class="token operator">:</span> bz<span class="token operator">-</span>maintain
#    hostname<span class="token operator">:</span> bz<span class="token operator">-</span>maintain
#    image<span class="token operator">:</span> bz<span class="token operator">-</span>maintain

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><h3 id="docker仓库搭建与使用"><a href="#docker仓库搭建与使用" class="header-anchor">#</a> docker仓库搭建与使用</h3> <h5 id="_1-仓库搭建"><a href="#_1-仓库搭建" class="header-anchor">#</a> 1.仓库搭建</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code># 1.获取私有仓库镜像
docker pull registry:2

# 2.运行镜像仓库
docker run -d -v /opt/registry:/var/lib/registry -p 5000:5000 --name myregistry registry:2

# 3.验证仓库是否运行
http://127.0.0.1:5000/v2

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h5 id="_2-仓库使用"><a href="#_2-仓库使用" class="header-anchor">#</a> 2.仓库使用</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code># 通过docker tag将镜像标志为要推送到私有仓库

docker tag mysql:latest 47.111.253.18:5000/mysql:latest

# 通过 docker push 命令将 mysql 镜像 push到私有仓库中
docker push 47.111.253.18:5000/mysql:latest

# 查看上传得镜像
http://47.111.253.18:5000/v2/_catalog 

# 从私有仓库获取应用
docker pull 47.111.253.18:5000/mysql:latest

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="_3-harbor管理器"><a href="#_3-harbor管理器" class="header-anchor">#</a> 3.harbor管理器</h5> <div class="language- line-numbers-mode"><pre class="language-text"><code>待完善
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="参考文档地址"><a href="#参考文档地址" class="header-anchor">#</a> 参考文档地址</h5> <p>docker搭建  https://www.cnblogs.com/huanchupkblog/p/10843800.html</p> <h4 id=""><a href="#" class="header-anchor">#</a></h4> <h2 id="postgres搭建"><a href="#postgres搭建" class="header-anchor">#</a> postgres搭建</h2> <p>postgres搭建参考<a href="https://www.postgresql.org/" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>其它参考文档：https://www.cnblogs.com/mingfan/p/12332506.html</p> <p>postgres设置参考文档：https://www.digitalocean.com/community/tutorials/how-to-install-and-use-postgresql-on-ubuntu-16-04</p> <p>https://blog.csdn.net/weixin_42404521/article/details/115870366</p> <p>拉取最新postgres</p> <p>docker pull postgres:latest</p> <p>docker中启动</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run --name dkpostgres -e POSTGRES_PASSWORD=elec2021 -p 5432:5432 -v pgdata:/var/lib/postgresql/data -d 47.111.253.18:5000/dkpostgres:latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/opsdev.html" class="prev">
        docker 说明
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0be82e56.js" defer></script><script src="/assets/js/2.2668fa1b.js" defer></script><script src="/assets/js/3.fd22fded.js" defer></script>
  </body>
</html>
